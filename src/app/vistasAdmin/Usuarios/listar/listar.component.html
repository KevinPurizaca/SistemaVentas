<div class="col-12">
  <p-toast key="tst"[baseZIndex]="99999" ></p-toast>

  <p-panel header="Busqueda de Usuarios" [collapsed]="false" [toggleable]="true" class="line-height-3 m-0"> 
      <form  >
          <div class="p-fluid p-formgrid grid">

              <div class="col-4 md:col-3">
                <label class="label-filter-text">Nombre</label>
                <input type="text" pInput placeholder="Nombre Producto" 
                class="p-inputtext p-component p-element">
              </div>

              
              <div class="col-4 md:col-3">
                <label class="label-filter-text">Nombre</label>
                <input type="text" pInput placeholder="Nombre Producto" 
                class="p-inputtext p-component p-element">
              </div>


              
              <div class="col-4 md:col-3">
                <label class="label-filter-text">Nombre</label>
                <input type="text" pInput placeholder="Nombre Producto" 
                class="p-inputtext p-component p-element">
              </div>             
          </div>
      </form>
  </p-panel>
</div>

<!-- <div class="col-12">
  <p-toast key="tst"[baseZIndex]="99999" ></p-toast>

  <p-panel header="Tabla de Usuarios"  
  
   [toggleable]="true" class="line-height-3 m-0"> 
      <p-table [rows]="5" 
      [globalFilterFields]="['nombre','usuarios.nombre','usuarios.apellidos','apellidos']"
      [value]="usuarios"
      [loading]="loading"
       [rowHover]="true"
      styleClass="p-datatable-gridlines" 
      [scrollable]="true" 
      responsiveLayout="scroll">

      <ng-template pTemplate="header">
        <tr>       
          <th class="HeaderTh">
            Nombre
          </th>   
          <th class="HeaderTh">
            Apellidos
          </th>   
          <th class="HeaderTh">
            Correo
          </th>  
          <th class="HeaderTh">
            Direccion
          </th>  
          <th class="HeaderTh">
            Rol
          </th> 
          <th class="HeaderTh">
            Telefono
          </th>       
          <th class="HeaderTh">
            Imagen 
          </th>
                       
          <th class="HeaderTh" pFrozenColumn  alignFrozen="right">
            Acciones
          </th>
        </tr>
      </ng-template>

      <ng-template pTemplate="body" let-data>
        <tr>
          <td class="BodyTh">
            {{  data.nombre  }}
          </td>        
          <td class="BodyTh">
            {{  data.apellidos  }}
          </td>   
          <td class="BodyTh">
            {{  data.correo  }}
          </td>  
          <td class="BodyTh">
            {{  data.direccion  }}
          </td>        
          <td class="BodyTh">
            {{  data.rol  }}
          </td>       
          <td class="BodyTh">
            {{  data.telefono  }}
          </td>  
          <td class="BodyThImg"  >
            <img  width="100" class="shadow-4"  alt="img1" src="{{ data.imagen }}" onerror="this.src='/assets/imgno.jpg'"/>
          </td>
            
        
          <td class="text-center tdacciones" pFrozenColumn  alignFrozen="right">
           
          

            <button (click)="eliminarUsuario()" pButton icon="pi pi-user-edit" tooltip="Editar"
              class="p-button-danger btnedit"
             ></button>

             <button (click)="editarUsuario()" pButton icon="pi pi-trash" tooltip="Eliminar"
             class="p-button-danger btndelete" ></button>
           <p-confirmPopup key="deleteUsuario{{data.iid_usuario}}"></p-confirmPopup>

           <button (click)="cambiarEstado($event,data)" 
           pButton [icon]="data.icono" tooltipPosition="left" 
            [title]="data.poolTip +'Usuario'"
            class="p-button-warning btnecambiarestado"
           ></button>
          </td>
        </tr>
      </ng-template>

      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="7">No se encontro Información.</td>
        </tr>
      </ng-template>

      <ng-template pTemplate="loadingbody">
        <tr>
          <td colspan="7">
            Cargando Información de Usuarios. Espere Por Favor.
          </td>
        </tr>
      </ng-template>
      </p-table>

      <p-paginator    
      [rows]="5" 
      [totalRecords]="totalRecord" 
      [rowsPerPageOptions]="[5,10,25,50]"
      [showCurrentPageReport]="true"
      (onPageChange)="cambiarPagina()"
      currentPageReportTemplate="Total : {{totalRecord}} registros" ></p-paginator>
  
  </p-panel>
</div> -->

<div class="col-12">
  <p-toast key="tst"[baseZIndex]="99999" ></p-toast>
 <p-panel  header="Administrar Usuarios"    
 [toggleable]="true" class="line-height-3 m-0">
  <div class="card">

    <p-table #dt [value]="usuarios" [rows]="5" [paginator]="true" 
             [tableStyle]="{'min-width': '75rem'}" [loading]="loading"
             [rowHover]="true" dataKey="id" currentPageReportTemplate="Mostrando {first} a {{limite}} de {{totalRecord}} Registros" 
             [showCurrentPageReport]="true" [scrollable]="true" responsiveLayout="scroll">       
      
        <ng-template pTemplate="header">
            <tr>
                <th class="ml-2" >#</th>
                <th  pSortableColumn="nombre" style="min-width:15rem">Nombre <p-sortIcon field="nombre"></p-sortIcon></th>              
                <!-- <th pSortableColumn="apellidos" style="min-width:10rem">Apellidos <p-sortIcon field="Apellidos"></p-sortIcon></th> -->
                <th pSortableColumn="correo" style="min-width:18rem">Correo<p-sortIcon field="correo"></p-sortIcon></th>
                <th pSortableColumn="direccion" style="min-width:8rem">Dirección <p-sortIcon field="direccion"></p-sortIcon></th>
                <th pSortableColumn="rol" style="min-width:10rem">Rol <p-sortIcon field="rol"></p-sortIcon></th>
                <th pSortableColumn="telefono" style="min-width:8rem">Telefono <p-sortIcon field="telefono"></p-sortIcon></th>
                <th style="min-width:6rem" pSortableColumn="imagen" >Imagen</th>
                <th pFrozenColumn  alignFrozen="right">Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
            <tr>
              <td class="ml-3">{{data.id}}</td>
                <td style="min-width:15rem">{{data.nombres}}</td>
                        <!-- <td style="min-width:10rem">{{data.apellidos}}</td> -->
                <td style="min-width:18rem">{{data.correo}}</td>
                <td style="min-width:8rem">{{data.direccion}}</td>
                <td style="min-width:10rem">{{data.rol}}</td>
                <td style="min-width:8rem;justify-content: center;" >{{data.telefono}}</td>
                <td style="min-width:6rem;justify-content: center;">
                  <img src="{{ data.imagen }}" onerror="this.src='/assets/imgno.jpg'" [alt]="data.imagen" width="80" height="50" class="shadow-4" />
            
                </td>
                <td  pFrozenColumn  alignFrozen="right">
                    <button pButton pRipple icon="pi pi-pencil" title="Editar Usuario"class="p-button-info btnedit mr-2" (click)="editUsuario(data)"></button>
                    <button pButton pRipple icon="pi pi-trash"  title="Eliminar Usuario"class=" p-button-danger btndelete mr-2" (click)="deleteUsuario(data)"></button>
                    <button pButton pRipple [icon]="data.icono" [title]="data.poolTip +'Usuario'" class="p-button-warning btnestado"  (click)="cambiarEstado($event,data)"  ></button>
                  </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary">
            <div class="flex align-items-center justify-content-between">
                En Total hay  {{totalRecord ? totalRecord : 0 }} Usuarios.
            </div>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="7">No se encontro Información.</td>
          </tr>
        </ng-template>
  
        <ng-template pTemplate="loadingbody">
          <tr>
            <td colspan="7">
              Cargando Información de Usuarios. Espere Por Favor.
            </td>
          </tr>
        </ng-template>
    </p-table>
</div>
 </p-panel>
</div>